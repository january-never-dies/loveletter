<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Sticker</title>
  <style>
    html, body { margin:0; height:100%; background:#000; }
    .frame{
      width:min(100vw, calc(100vh * (390/844)));
      aspect-ratio:390/844;
      margin:auto;
      position:relative;
      overflow:hidden;
      background:#111;
    }
    .bg{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit:cover;
      user-select:none; pointer-events:none;
    }
    .sticker{
      position:absolute;
      transform-origin:center center;
      user-select:none;
      -webkit-user-drag:none;
      cursor:pointer;
      transition:opacity .2s ease, transform .2s ease;
      will-change:transform;
    }
    .sticker.hidden{
      opacity:0;
      pointer-events:none;
    }
  </style>
</head>
<body>
  <div class="frame" id="frame">
    <img class="bg" src="assets/st_bg.png" alt="" fetchpriority="high" decoding="async">

    <!-- A (거의 수평) -->
    <img class="sticker" data-id="A"
      src="assets/st_A.png"
      style="left:2.05%; top:19.55%; width:73.08%; transform:rotate(0deg);"
      alt="" decoding="async">

    <!-- B (약 -24.5도) -->
    <img class="sticker" data-id="B"
      src="assets/st_B.png"
      style="left:22.31%; top:29.74%; width:70.77%; transform:rotate(-24.5deg);"
      alt="" decoding="async">

    <!-- C (약 +18.8도) -->
    <img class="sticker" data-id="C"
      src="assets/st_C.png"
      style="left:3.08%; top:49.05%; width:63.85%; transform:rotate(18.8deg);"
      alt="" decoding="async">

    <!-- D (약 -4.8도) -->
    <img class="sticker" data-id="D"
      src="assets/st_D.png"
      style="left:3.33%; top:73.34%; width:81.79%; transform:rotate(-4.8deg);"
      alt="" decoding="async">
  </div>

  <script>
    // 클릭하면 “방문 처리 → 사라짐” (나중에 메뉴 이동으로 바꿔 끼우면 됨)
    const KEY = "visited_stickers_v1";
    const get = () => { try { return JSON.parse(localStorage.getItem(KEY)||"{}"); } catch { return {}; } };
    const set = (v) => localStorage.setItem(KEY, JSON.stringify(v));

    const stickers = [...document.querySelectorAll(".sticker")];

    function apply(){
      const visited = get();
      stickers.forEach(el=>{
        if(visited[el.dataset.id]) el.classList.add("hidden");
        else el.classList.remove("hidden");
      });
    }

    stickers.forEach(el=>{
      el.addEventListener("click", ()=>{
        const visited = get();
        visited[el.dataset.id] = true;
        set(visited);
        apply();

        // ✅ 실제 메뉴로 보내려면 이걸로 교체:
        // location.href = `menu.html?id=${encodeURIComponent(el.dataset.id)}`;
      });
    });

    apply();
  </script>
</body>
</html>